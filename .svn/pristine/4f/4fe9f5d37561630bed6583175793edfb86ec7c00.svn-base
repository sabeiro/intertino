from googleads import dfp
from googleads import oauth2
from googleads.oauth2 import oauth2client
#from oauth2client.service_account import ServiceAccountCredentials
from oauth2client.contrib.appengine import AppAssertionCredentials

import httplib2
from httplib2 import Http
import os
import sys
import numpy as np
import pandas as pd
import json

# import oauth2client
# from oauth2client import client

key_file = '../../credenza/intertino-a80f4d829b76.json'
key_file2 = '../../credenza/intertino2.json'
cred = []
with open(key_file) as f:
    cred = json.load(f)
cred2 = []
with open(key_file2) as f:
    cred2 = json.load(f)

# oauth2_client = oauth2.GoogleServiceAccountClient(oauth2.GetAPIScope('dfp'),cred2['service_account_email'], key_file)
# dfp_client = dfp.DfpClient(oauth2_client, application_name)

oauth2_client = oauth2.GoogleRefreshTokenClient(cred2['client_id'],cred2['client_secret'],cred2['refresh_token'])
dfp_client = dfp.DfpClient(oauth2_client, application_name)

# credentials = ServiceAccountCredentials.from_json_keyfile_name(key_file,cred2['scopes'])

flow = client.flow_from_clientsecrets(key_file,scope='https://www.googleapis.com/auth/drive.metadata.readonly',redirect_uri='http://www.example.com/oauth2callback')

from oauth2client.client import flow_from_clientsecrets
flow = flow_from_clientsecrets(key_file,scope='https://www.googleapis.com/auth/calendar',redirect_uri='http://example.com/auth_return')

# credentials = AppAssertionCredentials('https://www.googleapis.com/auth/sqlservice.admin')
# from oauth2client.contrib.gce import AppAssertionCredentials
# credentials = AppAssertionCredentials('https://www.googleapis.com/auth/sqlservice.admin')

scopes = ['https://www.googleapis.com/auth/sqlservice.admin']
credentials = ServiceAccountCredentials.from_json_keyfile_name('intertino-a80f4d829b76.json', scopes=scopes)






# Initialize the GoogleRefreshTokenClient using the credentials you received
# in the earlier steps.
oauth2_client = oauth2.GoogleServiceAccountClient(oauth2.GetAPIScope('dfp'),cred['client_email'],'intertino-a80f4d829b76.json')

# Initialize the DFP client.
dfp_client = dfp.DfpClient(oauth2_client,application_name)






